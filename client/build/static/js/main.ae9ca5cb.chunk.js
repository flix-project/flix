(this.webpackJsonpflix=this.webpackJsonpflix||[]).push([[0],{100:function(e,a,t){},125:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),o=(t(99),t(100),t(84)),i=t(17),s=t.n(i),m=t(24),u=t(16),p=t(27),d=t.n(p),b=d.a.create({baseURL:"https://movie-tracker-users.herokuapp.com/"}),f=Object(n.createContext)(),v=Object(n.createContext)(),h=function(e){var a=Object(n.useContext)(f),t=a.user,c=a.autenticated,l=Object(n.useState)(null),i=Object(u.a)(l,2),p=i[0],h=i[1],E=Object(n.useState)(null),g=Object(u.a)(E,2),O=g[0],y=g[1],j=Object(n.useState)([]),w=Object(u.a)(j,2),x=w[0],k=w[1],S=Object(n.useState)([]),R=Object(u.a)(S,2),C=R[0],I=R[1],N=Object(n.useState)({title:"",type:""}),T=Object(u.a)(N,2),G=T[0],D=T[1],A=Object(n.useState)(!1),M=Object(u.a)(A,2),W=M[0],_=M[1],U=G.title,P=G.type;if(t)var F=t._id;return Object(n.useEffect)((function(){c&&t&&function(){var a=Object(m.a)(s.a.mark((function a(){var t,n,r,c,l;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return y(!0),a.prev=1,a.next=4,b.get("/api/users",{params:{id:F}});case 4:t=a.sent,n=t.data.favMovies,c=[],l=0;case 8:if(!(l<n.length)){a.next=17;break}return e="https://www.omdbapi.com/?apikey=".concat("a2c11b79","&i=").concat(n[l]),a.next=12,d.a.get(e);case 12:r=a.sent,c.push(r.data);case 14:l++,a.next=8;break;case 17:setTimeout((function(){k(c),y(!1)}),3e3),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(1),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[1,20]])})));return function(){return a.apply(this,arguments)}}()();if(W){var e,a,n,r=[];(function(){var t=Object(m.a)(s.a.mark((function t(){var c,l,i,m,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),e="All"===P?"https://www.omdbapi.com/?apikey=".concat("a2c11b79","&s=").concat(U):"https://www.omdbapi.com/?apikey=".concat("a2c11b79","&s=").concat(U,"&type=").concat(P),t.next=4,d.a.get(e);case 4:if(c=t.sent,l=[],i=c.data.Search){t.next=9;break}return t.abrupt("return");case 9:m=0;case 10:if(!(m<i.length)){t.next=28;break}return e="https://www.omdbapi.com/?apikey=".concat("a2c11b79","&i=").concat(i[m].imdbID),t.next=14,d.a.get(e);case 14:return u=t.sent,a="https://utelly-tv-shows-and-movies-availability-v1.p.rapidapi.com/idlookup?source=imdb&source_id=".concat(i[m].imdbID),d.a.defaults.headers.common["X-RapidAPI-Key"]="ECwc1Dd61vmshG20Fs7iPemQLEF8p1wa6MGjsnsq99PzvMBSSn",t.next=19,d.a.get(a);case 19:n=t.sent,delete d.a.defaults.headers.common["X-RapidAPI-Key"],u.data.Available=n.data.collection.locations,"undefined"!==typeof u.data.Available&&(r=u.data.Available.map((function(e){return e.display_name}))),"undefined"!==typeof r?u.data.Available=Object(o.a)(new Set(r)):u.data.Available[0]="This title is not available to stream.",l.push(u.data);case 25:m++,t.next=10;break;case 28:setTimeout((function(){I(l),h(!1)}),3e3);case 29:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}),[G,t]),r.a.createElement(v.Provider,{value:{movies:C,userMovies:x,spinner:p,spinnerFav:O,searchMovies:D,saveMovies:I,saveSearch:_,saveUserMovies:k}},e.children)},E=t(179),g=t(83),O=function(e){e?b.defaults.headers.common["x-auth-token"]=e:delete b.defaults.headers.common["x-auth-token"]},y=t(15),j=function(e,a){switch(a.type){case"REGISTERED":case"LOGIN_OK":return localStorage.setItem("token",a.payload.token),Object(y.a)(Object(y.a)({},e),{},{autenticated:!0,message:null,spinner:!1});case"GET_USER":return Object(y.a)(Object(y.a)({},e),{},{autenticated:!0,user:a.payload,spinner:!1});case"LOG_OUT":case"LOGIN_ERROR":case"REGISTER_ERROR":return localStorage.removeItem("token"),Object(y.a)(Object(y.a)({},e),{},{token:null,user:null,autenticated:!1,message:a.payload,spinner:!1});default:return e}},w=function(e){var a={token:localStorage.getItem("token"),autenticated:null,user:null,message:null,spinner:!0},t=Object(n.useReducer)(j,a),c=Object(u.a)(t,2),l=c[0],o=c[1],i=function(){var e=Object(m.a)(s.a.mark((function e(a){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("/api/users",a);case 3:t=e.sent,o({type:"REGISTERED",payload:t.data}),p(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,cat:"alert"},o({type:"REGISTER_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(s.a.mark((function e(){var a,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&O(a),e.prev=2,e.next=5,b.get("/api/auth");case 5:t=e.sent,o({type:"GET_USER",payload:t.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"LOGIN_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(s.a.mark((function e(a){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("/api/auth",a);case 3:t=e.sent,o({type:"LOGIN_OK",payload:t.data}),p(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,cat:"alert"},o({type:"LOGIN_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(f.Provider,{value:{token:l.token,autenticated:l.autenticated,user:l.user,message:l.message,spinner:l.spinner,createUser:i,login:d,autenticatedUser:p,logout:function(){o({type:"LOG_OUT"})}}},e.children)},x=t(13),k=t(159),S=t(167),R=t(168),C=t(39),I=t(183),N=t(180),T=t(169),G=t(182),D=t(166),A=t(170),M=t(171),W=t(54),_=t.n(W),U=t(181),P=t(162),F=t(164),L=t(165),q=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"center",fontSize:"2.2rem"},image:{width:95,height:70,borderRadius:25}}})),B=function(){var e=q();return r.a.createElement(P.a,{position:"static"},r.a.createElement(F.a,null,r.a.createElement(L.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",href:"/"},r.a.createElement("img",{src:"/logo.png",className:e.image,alt:"logo"})),r.a.createElement(C.a,{variant:"h6",className:e.title},"Movies and TV shows"),r.a.createElement(D.a,{color:"inherit",href:"/signup"},"SIGN UP")))},V=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),K=function(e){var a=V(),t=Object(n.useContext)(f),c=t.message,l=t.autenticated,o=t.login,i=t.spinner;Object(n.useEffect)((function(){l&&!i&&e.history.push("/home")}),[c,l,e.history]);var s=Object(n.useState)({email:"",password:""}),m=Object(u.a)(s,2),p=m[0],d=m[1],b=p.email,v=p.password,h=function(e){d(Object(y.a)(Object(y.a)({},p),{},Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(R.a,null),r.a.createElement(C.a,{component:"h1",variant:"h5",align:"center"},"Search for your favorite movies and TV shows"),r.a.createElement("div",{className:a.paper},r.a.createElement(I.a,{className:a.avatar},r.a.createElement(_.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,validate:"true",onSubmit:function(e){e.preventDefault(),o({email:b,password:v})}},r.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:h}),r.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:h}),r.a.createElement(T.a,{control:r.a.createElement(G.a,{value:"remember",color:"primary"}),label:"Remember me"}),c?r.a.createElement(U.a,{severity:"error"},c.msg):null,r.a.createElement(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"),r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0},r.a.createElement(M.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up")))))))},z=t(60),J=t(10),X=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Y=function(e){var a=X(),t=Object(n.useContext)(f),c=t.message,l=t.autenticated,o=t.createUser,i=t.spinner;Object(n.useEffect)((function(){l&&!i&&e.history.push("/home")}),[c,l,e.history]);var s=Object(n.useState)({name:"",email:"",password:"",confirm:"",error:""}),m=Object(u.a)(s,2),p=m[0],d=m[1],b=p.name,v=p.email,h=p.password,E=p.confirm,g=p.error,O=function(e){d(Object(y.a)(Object(y.a)({},p),{},Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(R.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(I.a,{className:a.avatar},r.a.createElement(_.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:a.form,validate:"true",onSubmit:function(e){e.preventDefault(),h===E?o({name:b,email:v,password:h}):d(Object(y.a)(Object(y.a)({},p),{},{error:"There is an error, passwords must be = "}))}},r.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,onChange:O}),r.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:O}),r.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:O}),r.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirm",label:"Repeat Password",type:"password",id:"confirm",onChange:O}),r.a.createElement(T.a,{control:r.a.createElement(G.a,{value:"remember",color:"primary"}),label:"Remember me"}),c?r.a.createElement(U.a,{severity:"error"},c.msg):null,g?r.a.createElement(U.a,{severity:"error"},g):null,r.a.createElement(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0},r.a.createElement(M.a,{href:"/",variant:"body2"},"Do you already have an account? Sign In")))))))},Q=t(56),$=t.n(Q),H=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(x.a)({flexGrow:1,fontSize:"2.2rem"},"@media (max-width:780px)",{display:"none"}),image:{width:95,height:70,borderRadius:25}}})),Z=function(){var e=H(),a=Object(n.useContext)(f).logout;return r.a.createElement(P.a,{position:"static"},r.a.createElement(F.a,null,r.a.createElement(L.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",href:"/home"},r.a.createElement("img",{src:"/logo.png",className:e.image,alt:"logo"})),r.a.createElement(C.a,{variant:"h6",className:e.title},"Movies and TV shows"),r.a.createElement(L.a,{"aria-label":"favorites",href:"/saved"},r.a.createElement($.a,{color:"secondary"})),r.a.createElement(D.a,{color:"inherit",onClick:function(){return a()}},"LOG OUT")))},ee=t(184),ae=Object(k.a)((function(e){var a;return{root:(a={"& > *":{margin:e.spacing(2),width:"25ch"}},Object(x.a)(a,"@media (max-width:780px)",{flexDirection:"column"}),Object(x.a)(a,"margin","5rem"),Object(x.a)(a,"display","flex"),Object(x.a)(a,"flexDirection","row"),Object(x.a)(a,"alignItems","center"),Object(x.a)(a,"justifyContent","space-between"),a)}})),te=function(){var e=Object(n.useState)({title:"",type:""}),a=Object(u.a)(e,2),t=a[0],c=a[1],l=Object(n.useContext)(v),o=l.searchMovies,i=l.saveSearch,s=function(e){c(Object(y.a)(Object(y.a)({},t),{},Object(x.a)({},e.target.name,e.target.value)))},m=ae();return r.a.createElement("form",{className:m.root,onSubmit:function(e){e.preventDefault(),o(t),i(!0)}},r.a.createElement(N.a,{name:"title",type:"text",label:"Title",placeholder:"Search by title",onChange:s,required:!0}),r.a.createElement(N.a,{name:"type",label:"Type",select:!0,onChange:s,required:!0,value:"All"},r.a.createElement(ee.a,{value:"All"},"-- All--"),r.a.createElement(ee.a,{value:"movie"},"Movies"),r.a.createElement(ee.a,{value:"series"},"TV Shows")),r.a.createElement(D.a,{variant:"contained",color:"secondary",type:"submit"},"Search"))},ne=t(178),re=t(173),ce=t(174),le=t(175),oe=t(176),ie=t(177),se=t(172),me=Object(k.a)((function(e){return{root:{maxWidth:345,margin:"auto"},media:{height:0,paddingTop:"120.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:Object(x.a)({backgroundColor:se.a[500]},"@media (max-width:780px)",{display:"none"})}})),ue=function(e){var a=e.movie,t=a.Type,c=a.Year,l=a.Title,o=a.Poster,i=a.imdbID,p=Object(n.useContext)(v).userMovies,d=Object(n.useContext)(f).user;if(d)var h=d._id;var E=me(),g=p.map((function(e){return e.imdbID})).includes(i),O=Object(n.useState)(g),y=Object(u.a)(O,2),j=y[0],w=y[1],x=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.put("/api/users",{id:h,imdbID:a});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.delete("/api/users/".concat(h),{params:{imdbID:a}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(re.a,{className:E.root},r.a.createElement(ce.a,{avatar:r.a.createElement(I.a,{"aria-label":"movie",className:E.avatar},"movie"===t?r.a.createElement("p",null,"M"):r.a.createElement("p",null,"TV")),title:l,subheader:c}),r.a.createElement(le.a,{className:E.media,image:o,title:l}),r.a.createElement(oe.a,null,r.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"div"},a.Plot?r.a.createElement("p",null,a.Plot):null,a.Genre?r.a.createElement("p",null,r.a.createElement("span",null,"Genre: ")," ",a.Genre," ",r.a.createElement("br",null)):null,a.Runtime?r.a.createElement("p",null,r.a.createElement("span",null,"Duration: ")," ",a.Runtime," ",r.a.createElement("br",null)):null,a.totalSeasons?r.a.createElement("p",null," ",r.a.createElement("span",null,"Seasons: ")," ",a.totalSeasons," ",r.a.createElement("br",null)):null,a.Available?r.a.createElement("div",null,r.a.createElement("span",null,"Where to watch? "),a.Available.map((function(e,a){return r.a.createElement("p",{key:a}," ",e)}))):null)),r.a.createElement(ie.a,{disableSpacing:!0},r.a.createElement(L.a,{"aria-label":"add to favorites",onClick:function(){j?k(i):x(i),w(!j)}},r.a.createElement($.a,{color:j?"secondary":"inherit"})))))},pe=function(){var e=Object(n.useContext)(v),a=e.movies,t=e.spinner;return a&&!t?r.a.createElement(A.a,{container:!0,spacing:3},a.map((function(e){return r.a.createElement(ue,{movie:e,key:e.imdbID})}))):r.a.createElement(r.a.Fragment,null,t?r.a.createElement(ne.a,{color:"secondary"}):r.a.createElement("h1",null," We couldn't find what you were looking for"))},de=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(Z,{props:e}),r.a.createElement("div",null,r.a.createElement(te,null)),r.a.createElement(pe,null))},be=t(85),fe=function(e){var a=e.component,t=Object(be.a)(e,["component"]),c=Object(n.useContext)(f),l=c.autenticated,o=c.spinner,i=c.autenticatedUser;return Object(n.useEffect)((function(){i()}),[]),r.a.createElement(J.b,Object.assign({},t,{render:function(e){return l||o?r.a.createElement(a,e):r.a.createElement(J.a,{to:"/"})}}))},ve=function(){var e=Object(n.useContext)(v),a=e.userMovies,t=e.spinnerFav;return a.length>0&&!t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null," Saved "),r.a.createElement(A.a,{container:!0,spacing:3},a.map((function(e){return r.a.createElement(ue,{movie:e,key:e.imdbID})})))):r.a.createElement(r.a.Fragment,null,t?r.a.createElement(ne.a,{color:"secondary"}):r.a.createElement("h1",null," You haven't saved yet"))},he=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(Z,{props:e}),r.a.createElement(ve,null))},Ee=Object(g.a)({palette:{primary:{main:"#212121"},secondary:{light:"#757ce8",main:"#ff5722"}}}),ge=localStorage.getItem("token");ge&&O(ge);var Oe=function(){return r.a.createElement(E.a,{theme:Ee},r.a.createElement(w,null,r.a.createElement(h,null,r.a.createElement(z.a,null,r.a.createElement(J.d,null,r.a.createElement(J.b,{exact:!0,path:"/",component:K}),r.a.createElement(J.b,{exact:!0,path:"/signup",component:Y}),r.a.createElement(fe,{exact:!0,path:"/home",component:de}),r.a.createElement(fe,{exact:!0,path:"/saved",component:he}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,a,t){e.exports=t(125)},99:function(e,a,t){}},[[94,1,2]]]);
//# sourceMappingURL=main.ae9ca5cb.chunk.js.map